{% extends 'base.html.twig' %}

{% block title %}Paiement{% endblock %}

{% block body %}
    <div class="container mt-5">
        <h2>Paiement Stripe</h2>
        <button id="checkout-button" class="btn btn-primary">Acheter</button>
    </div>

    <script src="https://js.stripe.com/v3/"></script>
    <script>
        const stripe = Stripe("{{ stripe_public_key }}");

        document.getElementById("checkout-button").addEventListener("click", () => {
            fetch("/create-checkout-session", {
                method: "POST",
            })
                .then(res => res.json())
                .then(data => {
                    stripe.redirectToCheckout({ sessionId: data.id });
                });
        });
    </script>
{% endblock %}
